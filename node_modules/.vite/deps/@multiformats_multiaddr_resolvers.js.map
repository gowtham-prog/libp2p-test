{
  "version": 3,
  "sources": ["../../../../../node_modules/receptacle/index.js", "../../../../../node_modules/dns-over-http-resolver/src/index.ts", "../../../../../node_modules/native-fetch/esm/src/index.js", "../../../../../node_modules/dns-over-http-resolver/src/utils.ts", "../../../../../node_modules/@multiformats/multiaddr/src/resolvers/dns.browser.ts", "../../../../../node_modules/@multiformats/multiaddr/src/resolvers/index.ts"],
  "sourcesContent": ["'use strict'\n\nmodule.exports = Receptacle\nvar toMS = require('ms')\nvar cache = Receptacle.prototype\nvar counter = new Date() % 1e9\n\nfunction getUID () { return (Math.random() * 1e9 >>> 0) + (counter++) }\n\n/**\n * Creates a cache with a maximum key size.\n *\n * @constructor\n * @param {Object} options\n * @param {Number} [options.max=Infinity] the maximum number of keys allowed in the cache (lru).\n * @param {Array} [options.items=[]] the default items in the cache.\n */\nfunction Receptacle (options) {\n  options = options || {}\n  this.id = options.id || getUID()\n  this.max = options.max || Infinity\n  this.items = options.items || []\n  this._lookup = {}\n  this.size = this.items.length\n  this.lastModified = new Date(options.lastModified || new Date())\n\n  // Setup initial timers and indexes for the cache.\n  for (var item, ttl, i = this.items.length; i--;) {\n    item = this.items[i]\n    ttl = new Date(item.expires) - new Date()\n    this._lookup[item.key] = item\n    if (ttl > 0) this.expire(item.key, ttl)\n    else if (ttl <= 0) this.delete(item.key)\n  }\n}\n\n/**\n * Tests if a key is currently in the cache.\n * Does not check if slot is empty.\n *\n * @param {String} key - the key to retrieve from the cache.\n * @return {Boolean}\n */\ncache.has = function (key) {\n  return key in this._lookup\n}\n\n/**\n * Retrieves a key from the cache and marks it as recently used.\n *\n * @param {String} key - the key to retrieve from the cache.\n * @return {*}\n */\ncache.get = function (key) {\n  if (!this.has(key)) return null\n  var record = this._lookup[key]\n  // Update expiry for \"refresh\" keys\n  if (record.refresh) this.expire(key, record.refresh)\n  // Move to front of the line.\n  this.items.splice(this.items.indexOf(record), 1)\n  this.items.push(record)\n  return record.value\n}\n\n/**\n * Retrieves user meta data for a cached item.\n *\n * @param {String} key - the key to retrieve meta data from the cache.\n * @return {*}\n */\ncache.meta = function (key) {\n  if (!this.has(key)) return null\n  var record = this._lookup[key]\n  if (!('meta' in record)) return null\n  return record.meta\n}\n\n/**\n * Puts a key into the cache with an optional expiry time.\n *\n * @param {String} key - the key for the value in the cache.\n * @param {*} value - the value to place at the key.\n * @param {Number} [options.ttl] - a time after which the key will be removed.\n * @return {Receptacle}\n */\ncache.set = function (key, value, options) {\n  var oldRecord = this._lookup[key]\n  var record = this._lookup[key] = { key: key, value: value }\n  // Mark cache as modified.\n  this.lastModified = new Date()\n\n  if (oldRecord) {\n    // Replace an old key.\n    clearTimeout(oldRecord.timeout)\n    this.items.splice(this.items.indexOf(oldRecord), 1, record)\n  } else {\n    // Remove least used item if needed.\n    if (this.size >= this.max) this.delete(this.items[0].key)\n    // Add a new key.\n    this.items.push(record)\n    this.size++\n  }\n\n  if (options) {\n    // Setup key expiry.\n    if ('ttl' in options) this.expire(key, options.ttl)\n    // Store user options in the record.\n    if ('meta' in options) record.meta = options.meta\n    // Mark a auto refresh key.\n    if (options.refresh) record.refresh = options.ttl\n  }\n\n  return this\n}\n\n/**\n * Deletes an item from the cache.\n *\n * @param {String} key - the key to remove.\n * @return {Receptacle}\n */\ncache.delete = function (key) {\n  var record = this._lookup[key]\n  if (!record) return false\n  this.lastModified = new Date()\n  this.items.splice(this.items.indexOf(record), 1)\n  clearTimeout(record.timeout)\n  delete this._lookup[key]\n  this.size--\n  return this\n}\n\n/**\n * Utility to register a key that will be removed after some time.\n *\n * @param {String} key - the key to remove.\n * @param {Number} [ms] - the timeout before removal.\n * @return {Receptacle}\n */\ncache.expire = function (key, ttl) {\n  var ms = ttl || 0\n  var record = this._lookup[key]\n  if (!record) return this\n  if (typeof ms === 'string') ms = toMS(ttl)\n  if (typeof ms !== 'number') throw new TypeError('Expiration time must be a string or number.')\n  clearTimeout(record.timeout)\n  record.timeout = setTimeout(this.delete.bind(this, record.key), ms)\n  record.expires = Number(new Date()) + ms\n  return this\n}\n\n/**\n * Deletes all items from the cache.\n * @return {Receptacle}\n */\ncache.clear = function () {\n  for (var i = this.items.length; i--;) this.delete(this.items[i].key)\n  return this\n}\n\n/**\n * Fixes serialization issues in polyfilled environments.\n * Ensures non-cyclical serialized object.\n */\ncache.toJSON = function () {\n  var items = new Array(this.items.length)\n  var item\n  for (var i = items.length; i--;) {\n    item = this.items[i]\n    items[i] = {\n      key: item.key,\n      meta: item.meta,\n      value: item.value,\n      expires: item.expires,\n      refresh: item.refresh\n    }\n  }\n\n  return {\n    id: this.id,\n    max: isFinite(this.max) ? this.max : undefined,\n    lastModified: this.lastModified,\n    items: items\n  }\n}\n", null, "const globalFetch = globalThis.fetch;\nconst globalHeaders = globalThis.Headers;\nconst globalRequest = globalThis.Request;\nconst globalResponse = globalThis.Response;\nexport {\n  globalFetch as fetch\n};\nexport {\n  globalHeaders as Headers\n};\nexport {\n  globalRequest as Request\n};\nexport {\n  globalResponse as Response\n};", null, null, null],
  "mappings": "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",
  "names": ["Receptacle", "debug", "Receptacle"]
}
